type Role {
    id: ID!
    nama_role: String!
    deskripsi: String
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    
    users: [User!]! @hasMany
}

input CreateRoleInput {
    nama_role: String!
    deskripsi: String
}

input UpdateRoleInput {
    id: Int
    nama_role: String
    deskripsi: String
}

type RolePaginator {
    data: [Role]!
    paginatorInfo: PageInfo!
}

type PageInfo{
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}

extend type Query{
    allRole: [Role!]! @all(model: "Role\\Role")
    role(id: ID! @eq(key: "id")): Role @find(model: "Role\\Role")
    allRoleArsip(
            search: String
            first: Int
            page: Int
        ): RolePaginator
    @field(resolver: "App\\GraphQL\\Role\\Queries\\RoleQuery@allArsip")
    allRolePaginate(
            search: String
            first: Int
            page: Int
        ): RolePaginator @field(resolver: "App\\GraphQL\\Role\\Queries\\RoleQuery@all")   
    roleByRole(
        nama_role: String! @where(operator: "like", key: "nama_role")
    ): [Role]! @all(model: "Role\\Role")
}

extend type Mutation {
  createRole(input: CreateRoleInput! @spread): Role
    @create(model: "Role\\Role")

  updateRole(
    id: ID! @eq(key: "id"),
    input: UpdateRoleInput! @spread
  ): Role
    @update(model: "Role\\Role")

  deleteRole(id: ID! @eq(key: "id")): Role
    @delete(model: "Role\\Role")

  restoreRole(id: ID!): Role
    @field(resolver: "Role\\Mutations\\RoleMutation@restore")

  forceDeleteRole(id: ID!): Role
    @field(resolver: "Role\\Mutations\\RoleMutation@forceDelete")
}
