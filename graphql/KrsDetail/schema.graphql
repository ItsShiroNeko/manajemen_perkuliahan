type KrsDetail {
    id: ID!
    krs_id: Int!
    kelas_id: Int!
    mata_kuliah_id: Int!
    sks: Int!
    status_ambil: String!
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    
    # Relations
    krs: Krs! @belongsTo
    kelas: Kelas! @belongsTo
    mataKuliah: MataKuliah! @belongsTo
    nilai: Nilai @hasOne
}

input CreateKrsDetailInput {
    krs_id: Int!
    kelas_id: Int!
    mata_kuliah_id: Int!
    sks: Int!
    status_ambil: String
}

input UpdateKrsDetailInput {
    id: Int
    krs_id: Int
    kelas_id: Int
    mata_kuliah_id: Int
    sks: Int
    status_ambil: String
}

type KrsDetailPaginator {
    data: [KrsDetail]!
    paginatorInfo: PageInfo!
}

type PageInfo {
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}


extend type Query{
    allKrsDetail: [KrsDetail!]! @all(model: "KrsDetail\\KrsDetail")
    krsdetail(id: ID! @eq(key: "id")): KrsDetail @find(model: "KrsDetail\\KrsDetail")
    allKrsDetailPaginate(
            search: String
            first: Int
            page: Int
        ): KrsDetailPaginator @field(resolver: "KrsDetail\\Queries\\KrsDetailQuery@all")   
    krsdetailByNama(
        nama_mk: String! @where(operator: "like", key: "nama_mk")
    ): [KrsDetail]! @all(model: "KrsDetail\\KrsDetail")
}

extend type Mutation {
  createKrsDetail(input: CreateKrsDetailInput! @spread): KrsDetail
    @create(model: "KrsDetail\\KrsDetail")

  updateKrsDetail(
    id: ID! @eq(key: "id"),
    input: UpdateKrsDetailInput! @spread
  ): KrsDetail
    @update(model: "KrsDetail\\KrsDetail")

  deleteKrsDetail(id: ID! @eq(key: "id")): KrsDetail
    @delete(model: "KrsDetail\\KrsDetail")

  restoreKrsDetail(id: ID!): KrsDetail
    @field(resolver: "KrsDetail\\Mutations\\KrsDetailMutation@restore")

  forceDeleteKrsDetail(id: ID!): KrsDetail
    @field(resolver: "KrsDetail\\Mutations\\KrsDetailMutation@forceDelete")
}
