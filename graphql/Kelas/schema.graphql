type Kelas {
    id: ID!
    kode_kelas: String!
    nama_kelas: String!
    mata_kuliah_id: Int!
    dosen_id: Int!
    semester_id: Int!
    kapasitas: Int!
    jumlah_mahasiswa: Int!
    status: String!
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    
    # Relations
    mataKuliah: MataKuliah! @belongsTo
    dosen: Dosen! @belongsTo
    semester: Semester! @belongsTo
    jadwalKuliah: [JadwalKuliah!]! @hasMany
    krsDetail: [KrsDetail!]! @hasMany
}

input CreateKelasInput {
    kode_kelas: String!
    nama_kelas: String!
    mata_kuliah_id: Int!
    dosen_id: Int!
    semester_id: Int!
    kapasitas: Int
    status: String
}

input UpdateKelasInput {
    id: Int
    kode_kelas: String
    nama_kelas: String
    mata_kuliah_id: Int
    dosen_id: Int
    semester_id: Int
    kapasitas: Int
    status: String
}

type KelasPaginator {
    data: [Kelas]!
    paginatorInfo: PageInfo!
}

type PageInfo {
    hasMorePages: Boolean!
    currentPage: Int!
    lastPage: Int!
    perPage: Int!
    total: Int!
}

extend type Query{
    allKelas: [Kelas!]! @all(model: "Kelas\\Kelas")
    kelas(id: ID! @eq(key: "id")): Kelas @find(model: "Kelas\\Kelas")
    allKelasPaginate(
            search: String
            first: Int
            page: Int
        ): KelasPaginator @field(resolver: "App\\GraphQL\\Kelas\\Queries\\KelasQuery@all")   
    allKelasArsip(
            search: String
            first: Int
            page: Int
        ): KelasPaginator @field(resolver: "App\\GraphQL\\Kelas\\Queries\\KelasQuery@allArsip")   
    kelasByNama(
        nama_kelas: String! @where(operator: "like", key: "nama_kelas")
    ): [Kelas]! @all(model: "Kelas\\Kelas")
}

extend type Mutation {
  createKelas(input: CreateKelasInput! @spread): Kelas
    @create(model: "Kelas\\Kelas")

  updateKelas(
    id: ID! @eq(key: "id"),
    input: UpdateKelasInput! @spread
  ): Kelas
    @update(model: "Kelas\\Kelas")

  deleteKelas(id: ID! @eq(key: "id")): Kelas
    @delete(model: "Kelas\\Kelas")

  restoreKelas(id: ID!): Kelas
    @field(resolver: "Kelas\\Mutations\\KelasMutation@restore")

  forceDeleteKelas(id: ID!): Kelas
    @field(resolver: "Kelas\\Mutations\\KelasMutation@forceDelete")
}
